!function(t){"use strict";function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function r(t,e,i){return(r=s()?Reflect.construct:function(t,e,i){var s=[null];s.push.apply(s,e);var r=new(Function.bind.apply(t,s));return i&&n(r,i.prototype),r}).apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(s=t,-1===Function.toString.call(s).indexOf("[native code]")))return t;var s;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,a)}function a(){return r(t,arguments,i(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n(a,t)})(t)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var u=function(t){function s(){var t,e,n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),e=this,(t=!(n=i(s).call(this))||"object"!=typeof n&&"function"!=typeof n?o(e):n).darkModeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),t.supportsMediaColorScheme="not all"!==window.matchMedia("(prefers-color-scheme)").media,t.onClick=t.onClick.bind(o(t)),t.systemQuery=t.systemQuery.bind(o(t)),t}var r,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(s,t),r=s,u=[{key:"observedAttributes",get:function(){return["value","text-on","text-off","text"]}}],(a=[{key:"attributeChangedCallback",value:function(t,e,i){switch(t){case"value":if(["true","false"].indexOf(i)<0){this.setAttribute("value",e);break}if("true"===i){localStorage.setItem("darkthemeswitcher","true"),this.state="true",this.button&&(this.button.setAttribute("aria-pressed","true"),this.span.innerText=this.on,this.html.classList.add("is-dark"),this.html.classList.remove("is-light"));break}if("false"===i){localStorage.setItem("darkthemeswitcher","false"),this.state="false",this.button&&(this.button.setAttribute("aria-pressed","false"),this.span.innerText=this.off,this.html.classList.add("is-light"),this.html.classList.remove("is-dark"));break}break;case"text-on":this.span&&"true"==this.state&&(this.span.innerText=i);break;case"text-off":this.span&&"false"==this.state&&(this.span.innerText=i);break;case"text-legend":this.button&&(this.button.innerText=i)}}},{key:"connectedCallback",value:function(){this.html=document.documentElement,this.html.classList.remove("is-dark","is-light"),this.calcInitialState(),this.render(),this.value=this.state,this.supportsMediaColorScheme&&this.darkModeMediaQuery.addListener(this.systemQuery)}},{key:"systemQuery",value:function(t){this.value=!0===t.matches?"true":"false"}},{key:"disconnectedCallback",value:function(){this.button&&this.button.removeEventListener("click",this.onClick)}},{key:"calcInitialState",value:function(){this.state=localStorage.getItem("darkthemeswitcher"),this.default||this.state?!this.default||this.state?this.state:this.value=this.default:this.supportsMediaColorScheme?(this.state=matchMedia("('prefers-color-scheme': 'light'),('prefers-color-scheme':'no-preference')").matches?"false":"true",this.value=this.state):(this.state="false",this.value="false")}},{key:"onClick",value:function(){var t="false"===this.value?"true":"false";this.value=t,this.html.classList.remove("true"===t?"is-light":"is-dark"),this.html.classList.add("true"===t?"is-dark":"is-light"),this.dispatchEvent(new Event("change"))}},{key:"render",value:function(){this.button||(this.button=document.createElement("button"),this.button.innerText=this.legend,this.button.setAttribute("tabindex",0),this.button.setAttribute("aria-pressed","true"==this.state?"true":"false"),this.span=document.createElement("span"),this.span.setAttribute("aria-hidden","true"),this.span.innerText="true"==this.state?this.on:this.off,this.button.appendChild(this.span),this.button.addEventListener("click",this.onClick),this.appendChild(this.button))}},{key:"value",get:function(){return this.getAttribute("value")},set:function(t){this.setAttribute("value",t)}},{key:"default",get:function(){return this.getAttribute("default")}},{key:"on",get:function(){return this.getAttribute("text-on")||"on"},set:function(t){this.setAttribute("text-on",t)}},{key:"off",get:function(){return this.getAttribute("text-off")||"off"},set:function(t){this.setAttribute("text-off",t)}},{key:"legend",get:function(){return this.getAttribute("text-legend")||"dark theme:"},set:function(t){this.setAttribute("text-legend",t)}}])&&e(r.prototype,a),u&&e(r,u),s}(a(HTMLElement));customElements.get("dark-light-switch")||customElements.define("dark-light-switch",u),t.Switcher=u}({});
